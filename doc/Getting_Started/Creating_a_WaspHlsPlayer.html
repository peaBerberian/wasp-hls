<!DOCTYPE html><html lang="en"><head><meta name="viewport" content="width=device-width, initial-scale=1"><meta charset="utf-8"><link rel="stylesheet" href="../styles/style.css"/><link rel="stylesheet" href="../styles/code.css"/><title>Creating a WaspHlsPlayer</title></head><body class="no-js"><script type="text/javascript">document.body.className = "";window.rootUrl = "..";</script><div class="page-wrapper"><nav class="navbar-parent"><div class="navbar-wrapper"><div class="navbar-items"><button aria-label="Open website index" class="hamburger-opener"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="logo-link" href="https://github.com/peaBerberian/wasp-hls"><img alt="Logo" class="navbar-item navbar-item-logo" src="../images/logo_big.png" /></a><a class="navbar-item navbar-active hideable"href="./Welcome.html">Getting Started</a>
<a class="navbar-item hideable"href="../API/Overview.html">API</a>
<a class="navbar-item hideable"href="https://peaberberian.github.io/wasp-hls/index.html">Demo</a>
<span class="navbar-item search-icon last-left"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20"><title>search</title><path d="M19 17l-5.15-5.15a7 7 0 1 0-2 2L17 19zM3.5 8A4.5 4.5 0 1 1 8 12.5 4.5 4.5 0 0 1 3.5 8z"/><script xmlns=""/></svg></span>
<a aria-label="Link to repository" class="navbar-item first-right github-link hideable" href="https://github.com/peaBerberian/wasp-hls"><svg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/></svg></a></div></div> </nav><aside class="sidebar-parent"><div class="sidebar-header"><a href="https://github.com/peaBerberian/wasp-hls"><img alt="logo" class="sidebar-header-logo" src="../images/logo_big.png" /></a></div><div class="sidebar-wrapper"><div class="sidebar-items"><li class="sidebar-item"><a class="sidebar-link" href="./Welcome.html">Welcome</a></li><li class="sidebar-item"><a class="sidebar-link active" href="./Creating_a_WaspHlsPlayer.html">Creating a WaspHlsPlayer</a></li></div></div></aside><div class="content-wrapper"><div class="content"><div id="search-wrapper"><input type="search" name="search" id="searchbar" placeholder="Search in this documentation" class="active" /><div id="search-results"></div></div><html><head></head><body><p><a name="creating_a_new_wasphlsplayer"></a></p>
<h1>Creating a new WaspHlsPlayer</h1>
<p><a name="instantiation"></a></p>
<h2>Instantiation</h2>
<p>Each <code>WaspHlsPlayer</code> allows to play HLS content on a single video element.</p>
<p>That video element has to be provided on instanciation like this:</p>
<pre><code class="language-js"><span class="hljs-keyword">const</span> player = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WaspHlsPlayer</span>(videoElement);
</code></pre>
<p>More information on the WaspHlsPlayer’s constructor can be found <a href="../API/Instantiation.html">in the
API documentation page presenting the instantiation step</a>.</p>
<p>Note that the <code>WaspHlsPlayer</code>’s constructor optionally can take a second
argument, which allows to overwrite its initial configuration.
More information on this object is available <a href="../API/Configuration_Object.html">in the API
documentation</a>.</p>
<p>Before being ready to load contents on that new instance, we now have to
“initialize” it, which is an operation described in the next chapter.</p>
<p><a name="wasphlsplayer_initialization"></a></p>
<h2>WaspHlsPlayer initialization</h2>
<p>Before it can actually load a content, the <code>WaspHlsPlayer</code> needs to let it have
access to two files:</p>
<ol>
<li>
<p>The worker file, which contains code which will run concurrently to your
application.</p>
</li>
<li>
<p>The WebAssembly file, used by the worker file to run efficiently its
internal logic.</p>
</li>
</ol>
<p>Both of those files can be retrieved <a href="https://github.com/peaBerberian/wasp-hls/releases">in the release page</a>
(you should choose the one linked to your actual <code>WaspHlsPlayer</code>’s version).
They then have to be served via HTTP(S) (through a solution of your choosing),
and can be communicated to the <code>WaspHlsPlayer</code> through its <code>initialize</code> method:</p>
<pre><code class="language-js">player
  .<span class="hljs-title function_">initialize</span>({
    <span class="hljs-attr">workerUrl</span>: <span class="hljs-string">"https://www.example.com/worker.js"</span>,
    <span class="hljs-attr">wasmUrl</span>: <span class="hljs-string">"https://www.example.com/wasp_hls_bg.wasm"</span>,
  })
  .<span class="hljs-title function_">then</span>(
    <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"WaspHlsPlayer initialized with success!"</span>);
    },
    <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Could not initialize WaspHlsPlayer:"</span>, err);
    }
  );

<span class="hljs-comment">// we can now use the player (we don't need to await the Promise here)</span>
</code></pre>
<p>Alternatively, if you don’t want the hassle of having to serve those files
separately when developping, the <code>WaspHlsPlayer</code> also provide both the
WebAssembly and Worker files through JavaScript-embedded versions, respectively
through the <code>"wasp-hls/wasm"</code> and the <code>"wasp-hls/worker"</code> path:</p>
<pre><code class="language-js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">EmbeddedWasm</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"wasp-hls/wasm"</span>;
<span class="hljs-keyword">import</span> <span class="hljs-title class_">EmbeddedWorker</span> <span class="hljs-keyword">from</span> <span class="hljs-string">"wasp-hls/worker"</span>;

player
  .<span class="hljs-title function_">initialize</span>({
    <span class="hljs-attr">workerUrl</span>: <span class="hljs-title class_">EmbeddedWorker</span>,
    <span class="hljs-attr">wasmUrl</span>: <span class="hljs-title class_">EmbeddedWasm</span>,
  })
  .<span class="hljs-title function_">then</span>(
    <span class="hljs-function">() =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">"WaspHlsPlayer initialized with success!"</span>);
    },
    <span class="hljs-function">(<span class="hljs-params">err</span>) =&gt;</span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(<span class="hljs-string">"Could not initialize WaspHlsPlayer:"</span>, err);
    }
  );

<span class="hljs-comment">// we can now use the player (we don't need to await the Promise here)</span>
</code></pre>
<p>Note however that this leads to a huge file size (though which is drastically
reduced when compressed) and to some small inefficencies on initialization (as
those JavaScript files have to first be interpreted in the main thread), which
is why I recommend serving both those files separately for production.</p>
<p>It’s also possible to communicate an initial bandwidth estimate through the
<code>initialize</code> method to improve the <code>WaspHlsPlayer</code>’s accuracy regarding its
initially loaded quality.
For more information on this “initialization” step, you can consult <a href="../API/Initialization.html">the API
documentation page dedicated to it, here</a>.</p>
</body></html><nav class="next-previous-page-wrapper" aria-label="Navigate between pages"><div class="next-or-previous-page"><a class="next-or-previous-page-link" href="./Welcome.html"><div class="next-or-previous-page-link-label">Previous</div><div class="next-or-previous-page-link-name">Welcome</div></a></div><div class="next-or-previous-page next-page"></div></nav></div><div class="tocbar-wrapper"><div class="tocbar"><p><a href="#creating_a_new_wasphlsplayer">Creating a new WaspHlsPlayer</a></p>
<ul>
<li><a href="#instantiation">Instantiation</a></li>
<li><a href="#wasphlsplayer_initialization">WaspHlsPlayer initialization</a></li>
</ul>
</div></div></div></div><div class="hamburger-bar"><div class="hamburger-header"><span class="hamburger-title">Page List</span><button aria-label="Close website index" type="button" class="hamburger-bar-closer"><svg viewBox="0 0 15 15" width="21" height="21"><g stroke="black" stroke-width="1.2"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><ul class="page-list-wrapper"><li class="page-list-item"><div class="page-list-group opened active">Getting Started</div><ul class="page-list-cat-group"><li class="page-list-item"><a href="./Welcome.html">Welcome</a></li>
<li class="page-list-item active"><a href="./Creating_a_WaspHlsPlayer.html">Creating a WaspHlsPlayer</a></li></ul></li>
<li class="page-list-item"><div class="page-list-group">API</div><ul class="page-list-cat-group"><li class="page-list-item"><a href="../API/Overview.html">API Overview</a></li>
<li class="page-list-item"><a href="../API/Instantiation.html">WaspHlsPlayer Instantiation</a></li>
<li class="page-list-item"><a href="../API/Initialization.html">Initialization</a></li>
<li class="page-list-item"><a href="../API/Loading_a_content.html">Loading a content</a></li>
<li class="page-list-item"><a href="../API/Player_Events.html">Player Events</a></li>
<li class="page-list-item"><a href="../API/Configuration_Object.html">Configuration Object</a></li>
<li class="page-list-item"><a href="../API/Player_Errors.html">Player Errors</a></li>
<li><div class="page-list-item page-list-group">Basic Methods</div><ul class="page-list-group-group"><li class="page-list-item"><a href="../API/Basic_Methods/initialize.html">initialize</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/load.html">load</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/updateConfig.html">updateConfig</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/getConfig.html">getConfig</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/getPlayerState.html">getPlayerState</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/pause.html">Pause</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/resume.html">Resume</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/getError.html">getError</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/stop.html">stop</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/addEventListener.html">addEventListener</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/removeEventListener.html">removeEventListener</a></li>
<li class="page-list-item"><a href="../API/Basic_Methods/dispose.html">dispose</a></li></ul></li>
<li><div class="page-list-item page-list-group">Playback Information</div><ul class="page-list-group-group"><li class="page-list-item"><a href="../API/Playback_Information/isPlaying.html">isPlaying</a></li>
<li class="page-list-item"><a href="../API/Playback_Information/isPaused.html">isPaused</a></li>
<li class="page-list-item"><a href="../API/Playback_Information/isRebuffering.html">isRebuffering</a></li>
<li class="page-list-item"><a href="../API/Playback_Information/isEnded.html">isEnded</a></li></ul></li>
<li><div class="page-list-item page-list-group">Position Control</div><ul class="page-list-group-group"><li class="page-list-item"><a href="../API/Position_Control/getPosition.html">getPosition</a></li>
<li class="page-list-item"><a href="../API/Position_Control/seek.html">seek</a></li>
<li class="page-list-item"><a href="../API/Position_Control/getMinimumPosition.html">getMinimumPosition</a></li>
<li class="page-list-item"><a href="../API/Position_Control/getMaximumPosition.html">getMaximumPosition</a></li>
<li class="page-list-item"><a href="../API/Position_Control/getMediaOffset.html">getMediaOffset</a></li></ul></li>
<li><div class="page-list-item page-list-group">Speed Control</div><ul class="page-list-group-group"><li class="page-list-item"><a href="../API/Speed_Control/setSpeed.html">setSpeed</a></li>
<li class="page-list-item"><a href="../API/Speed_Control/getSpeed.html">getSpeed</a></li></ul></li>
<li><div class="page-list-item page-list-group">Variant Selection</div><ul class="page-list-group-group"><li class="page-list-item"><a href="../API/Variant_Selection/getCurrentVariant.html">getCurrentVariant</a></li>
<li class="page-list-item"><a href="../API/Variant_Selection/getVariantList.html">getVariantList</a></li>
<li class="page-list-item"><a href="../API/Variant_Selection/lockVariant.html">lockVariant</a></li>
<li class="page-list-item"><a href="../API/Variant_Selection/unlockVariant.html">unlockVariant</a></li>
<li class="page-list-item"><a href="../API/Variant_Selection/getLockedVariant.html">getLockedVariant</a></li></ul></li>
<li><div class="page-list-item page-list-group">Audio Track Selection</div><ul class="page-list-group-group"><li class="page-list-item"><a href="../API/Audio_Track_Selection/getCurrentAudioTrack.html">getCurrentAudioTrack</a></li>
<li class="page-list-item"><a href="../API/Audio_Track_Selection/getAudioTrackList.html">getAudioTrackList</a></li>
<li class="page-list-item"><a href="../API/Audio_Track_Selection/setAudioTrack.html">setAudioTrack</a></li></ul></li></ul></li>
<li class="page-list-item"><a href="https://peaberberian.github.io/wasp-hls/index.html">Demo</a></li>

<li class="page-list-item"><a aria-label="Link to repository" href="https://github.com/peaBerberian/wasp-hls"><svg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'><path d='M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12'/></svg></a></li></ul></div><script type="text/javascript" src="../scripts/lunr.js" charset="utf-8"></script><script type="text/javascript" src="../scripts/script.js" charset="utf-8"></script></body></html>